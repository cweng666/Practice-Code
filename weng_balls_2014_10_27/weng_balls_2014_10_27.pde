int ballCount=200;
float[] x = new float [ballCount];
float[] y= new float [ballCount];
float[] dia = new float [ballCount];
float[] vx = new float[ballCount];
float[] vy = new float [ballCount];
float[] vd = new float [ballCount];
float[] Color = new float [ballCount];
float[] transp = new float [ballCount];
float dx, dy;
float ease = 0.05;

void setup() {
  size(displayWidth, displayHeight);
  colorMode(HSB, 360, 100, 100, 100);
  for (int i=0; i<ballCount; i++) {
    x[i]=random(0, width);
    y[i]=random(0, height);
    dia[i]=random(100);
    vx[i]=random(-3, 3);
    vy[i]=random(-2, 2);
    vd[i]=random(-3, 3);
    Color[i]=random(360);
    transp[i] =random(100);
  }
}

void draw() {
  noStroke();
  background(0);
  //fill(frameCount%360, 100, 100, 50);
  for (int i=0; i<ballCount; i++) {
    fill(Color[i], 100, 100, transp[i]);
    ellipse(x[i], y[i], dia[i], dia[i]);
    x[i]+=vx[i];
    y[i]+=vy[i];
    dia[i]+=cos(frameCount/6)*1.5;
    //    dia[i]+=vd[i];
    //    if (dia[i]>=50) {
    //      vd[i]*=-1;
    //    }
    //    if (dia[i]<0) {
    //      vd[i]*=-1;
    //    }
    if (x[i]+dia[i]/2>width                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   || x[i]-dia[i]/2<0) {
      vx[i]*=-1;
    }
    if (y[i]+dia[i]/2>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     height || y[i]-dia[i]/2<0) {
      vy[i]*=-1;
    }
    if (mousePressed) {
      dx = mouseX - x[i];
      dy = mouseY - y[i];
      x[i]+= dx*ease;
      y[i]+= dy*ease;
//      x[i]=mouseX;
//      y[i]=mouseY;
    }   
x[i]=constrain(x[i],0,displayWidth);
y[i]=constrain(y[i],0,displayHeight);
}
}

